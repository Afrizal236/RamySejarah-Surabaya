<!DOCTYPE html>
<html lang="id">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ChatBot Sejarah Surabaya</title>
   <style>
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }

       body {
           font-family: Arial, sans-serif;
           background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
           min-height: 100vh;
           display: flex;
           justify-content: center;
           align-items: center;
           padding: 20px;
       }

       /* Hamburger Menu Button */
       .hamburger-menu {
           position: fixed;
           top: 20px;
           left: 20px;
           z-index: 1000;
           background: rgba(212, 175, 55, 0.9);
           backdrop-filter: blur(10px);
           padding: 12px;
           border-radius: 8px;
           cursor: pointer;
           transition: all 0.3s ease;
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
       }

       .hamburger-menu:hover {
           background: rgba(212, 175, 55, 1);
           transform: scale(1.05);
       }

       .hamburger-icon {
           width: 24px;
           height: 24px;
           display: flex;
           flex-direction: column;
           justify-content: space-around;
           cursor: pointer;
       }

       .hamburger-line {
           width: 100%;
           height: 3px;
           background: white;
           border-radius: 3px;
           transition: all 0.3s ease;
       }

       .hamburger-menu.active .hamburger-line:nth-child(1) {
           transform: rotate(45deg) translate(5px, 5px);
       }

       .hamburger-menu.active .hamburger-line:nth-child(2) {
           opacity: 0;
       }

       .hamburger-menu.active .hamburger-line:nth-child(3) {
           transform: rotate(-45deg) translate(7px, -6px);
       }

       /* Sidebar Navigation */
       .sidebar {
           position: fixed;
           top: 0;
           left: -280px;
           width: 280px;
           height: 100vh;
           background: rgba(17, 24, 39, 0.98);
           color: white;
           padding: 40px 32px;
           z-index: 999;
           transition: left 0.3s ease;
           backdrop-filter: blur(10px);
           box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
       }

       .sidebar.open {
           left: 0;
       }

       /* Overlay */
       .overlay {
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background: rgba(0, 0, 0, 0.5);
           z-index: 998;
           display: none;
           backdrop-filter: blur(2px);
       }

       .overlay.show {
           display: block;
       }

       /* Logo Section */
       .logo-section {
           text-align: center;
           margin-bottom: 48px;
       }

       .logo-wrapper {
           background: transparent;
           padding: 16px;
           border-radius: 8px;
           display: inline-block;
           margin-bottom: 20px;
       }

       .logo-image {
           width: 80px;
           height: 103px;
           object-fit: contain;
           display: block;
       }

       .history-text {
           font-size: 24px;
           font-weight: bold;
           letter-spacing: 0.3em;
           margin-top: 16px;
           color: white;
       }

       /* Navigation */
       .nav-menu {
           margin-top: 48px;
       }

       .nav-link {
           display: block;
           color: #9ca3af;
           text-decoration: none;
           padding: 12px 0;
           margin-bottom: 8px;
           transition: color 0.3s ease;
           font-size: 18px;
           cursor: pointer;
           border-radius: 6px;
           padding-left: 12px;
       }

       .nav-link:hover {
           color: white;
           background: rgba(255, 255, 255, 0.1);
       }

       .nav-link.active {
           color: #ff6b35;
           font-weight: 600;
           background: rgba(255, 107, 53, 0.1);
       }

       .nav-link.service {
           color: #d4af37;
           font-weight: 600;
           margin-top: 24px;
       }

       .nav-link.service:hover {
           color: #d4af37;
           background: rgba(212, 175, 55, 0.1);
       }

       /* Social Media Icons */
       .social-icons {
           position: absolute;
           bottom: 40px;
           left: 32px;
           display: flex;
           gap: 20px;
       }

       .social-icons a {
           color: #9ca3af;
           text-decoration: none;
           font-size: 20px;
           transition: color 0.3s ease;
           width: 40px;
           height: 40px;
           display: flex;
           align-items: center;
           justify-content: center;
           border-radius: 50%;
           background: rgba(255, 255, 255, 0.1);
       }

       .social-icons a:hover {
           color: white;
           background: rgba(255, 255, 255, 0.2);
       }

       .chatbot-container {
           width: 100%;
           max-width: 800px;
           background: rgba(255, 255, 255, 0.95);
           border-radius: 20px;
           box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
           overflow: hidden;
           backdrop-filter: blur(10px);
       }

       .chatbot-header {
           background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
           color: white;
           padding: 25px;
           text-align: center;
           position: relative;
       }

       .chatbot-logo {
           width: 80px;
           height: 66px;
           margin: 0 auto 15px;
           background: rgba(255, 255, 255, 0.1);
           border-radius: 50%;
           display: flex;
           align-items: center;
           justify-content: center;
           backdrop-filter: blur(5px);
       }

       .chatbot-logo img {
           width: 60px;
           height: 50px;
           object-fit: contain;
       }

       .chatbot-title {
           font-size: 28px;
           font-weight: 700;
           margin-bottom: 8px;
           text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
       }

       .chatbot-subtitle {
           font-size: 16px;
           opacity: 0.9;
           font-weight: 400;
       }

       .chat-messages {
           height: 400px;
           overflow-y: auto;
           padding: 25px;
           background: #f8f9fa;
           display: flex;
           flex-direction: column;
           gap: 15px;
       }

       .message {
           max-width: 80%;
           padding: 15px 20px;
           border-radius: 18px;
           line-height: 1.6;
           font-size: 15px;
           animation: fadeIn 0.3s ease-in;
       }

       .message.bot {
           background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
           color: white;
           align-self: flex-start;
           border-bottom-left-radius: 5px;
           box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
       }

       .message.user {
           background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
           color: white;
           align-self: flex-end;
           border-bottom-right-radius: 5px;
           box-shadow: 0 4px 15px rgba(26, 26, 46, 0.3);
       }

       .quick-questions {
           padding: 20px 25px;
           background: white;
           border-top: 1px solid #e9ecef;
       }

       .quick-questions.disabled {
           opacity: 0.5;
           pointer-events: none;
       }

       .quick-questions h3 {
           color: #1a1a2e;
           font-size: 18px;
           margin-bottom: 15px;
           font-weight: 600;
       }

       .question-buttons {
           display: flex;
           flex-wrap: wrap;
           gap: 10px;
       }

       .question-btn {
           background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
           border: 2px solid #d4af37;
           color: #1a1a2e;
           padding: 12px 18px;
           border-radius: 25px;
           cursor: pointer;
           font-size: 14px;
           font-weight: 500;
           transition: all 0.3s ease;
           text-align: center;
           min-width: 120px;
       }

       .question-btn:hover {
           background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
           color: white;
           transform: translateY(-2px);
           box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
       }

       .chat-input {
           display: flex;
           padding: 20px 25px;
           background: white;
           border-top: 1px solid #e9ecef;
           gap: 15px;
       }

       .chat-input.disabled {
           opacity: 0.5;
           pointer-events: none;
       }

       .chat-input input {
           flex: 1;
           padding: 15px 20px;
           border: 2px solid #e9ecef;
           border-radius: 25px;
           font-size: 15px;
           outline: none;
           transition: border-color 0.3s ease;
       }

       .chat-input input:focus {
           border-color: #d4af37;
       }

       .send-btn {
           background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
           color: white;
           border: none;
           padding: 15px 25px;
           border-radius: 25px;
           cursor: pointer;
           font-size: 15px;
           font-weight: 600;
           transition: all 0.3s ease;
           min-width: 80px;
       }

       .send-btn:hover {
           transform: translateY(-2px);
           box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
       }

       .restart-btn {
           background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
           color: white;
           border: none;
           padding: 15px 25px;
           border-radius: 25px;
           cursor: pointer;
           font-size: 15px;
           font-weight: 600;
           transition: all 0.3s ease;
           min-width: 120px;
           margin-top: 10px;
       }

       .restart-btn:hover {
           transform: translateY(-2px);
           box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
       }

       .typing-indicator {
           display: none;
           align-items: center;
           gap: 10px;
           padding: 15px 20px;
           background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
           color: white;
           border-radius: 18px;
           border-bottom-left-radius: 5px;
           max-width: 80px;
           align-self: flex-start;
       }

       .typing-dots {
           display: flex;
           gap: 3px;
       }

       .typing-dot {
           width: 8px;
           height: 8px;
           background: white;
           border-radius: 50%;
           animation: typing 1.4s infinite;
       }

       .typing-dot:nth-child(2) {
           animation-delay: 0.2s;
       }

       .typing-dot:nth-child(3) {
           animation-delay: 0.4s;
       }

       @keyframes typing {
           0%, 60%, 100% {
               transform: translateY(0);
               opacity: 0.7;
           }
           30% {
               transform: translateY(-10px);
               opacity: 1;
           }
       }

       @keyframes fadeIn {
           from {
               opacity: 0;
               transform: translateY(10px);
           }
           to {
               opacity: 1;
               transform: translateY(0);
           }
       }

       /* Responsive Design */
       @media (max-width: 768px) {
           .sidebar {
               width: 300px;
               left: -300px;
           }

           .chatbot-container {
               margin: 10px;
               max-width: 100%;
           }

           .chatbot-header {
               padding: 20px;
           }

           .chatbot-title {
               font-size: 24px;
           }

           .chatbot-subtitle {
               font-size: 14px;
           }

           .chat-messages {
               height: 350px;
               padding: 20px;
           }

           .message {
               max-width: 90%;
               padding: 12px 16px;
               font-size: 14px;
           }

           .quick-questions {
               padding: 15px 20px;
           }

           .question-btn {
               min-width: 100px;
               padding: 10px 14px;
               font-size: 13px;
           }

           .chat-input {
               padding: 15px 20px;
           }

           .chat-input input {
               padding: 12px 16px;
               font-size: 14px;
           }

           .send-btn, .restart-btn {
               padding: 12px 20px;
               font-size: 14px;
           }
       }

       @media (max-width: 480px) {
           .sidebar {
               width: 280px;
               left: -280px;
           }

           .chatbot-logo {
               width: 70px;
               height: 58px;
           }

           .chatbot-logo img {
               width: 50px;
               height: 42px;
           }

           .chatbot-title {
               font-size: 20px;
           }

           .question-buttons {
               flex-direction: column;
           }

           .question-btn {
               min-width: 100%;
               text-align: center;
           }
       }
   </style>
</head>
<body>
   <!-- Hamburger Menu -->
   <div class="hamburger-menu" onclick="toggleSidebar()">
       <div class="hamburger-icon">
           <div class="hamburger-line"></div>
           <div class="hamburger-line"></div>
           <div class="hamburger-line"></div>
       </div>
   </div>

   <!-- Overlay -->
   <div class="overlay" id="overlay" onclick="closeSidebar()"></div>

   <!-- Sidebar -->
   <div class="sidebar" id="sidebar">
       <!-- Logo Section -->
       <div class="logo-section">
           <div class="logo-wrapper">
               <img src="https://github.com/Afrizal236/sejarah-surabaya/blob/main/City_of_Surabaya_Logo.svg.png?raw=true" 
                   alt="Logo Kota Surabaya" 
                   class="logo-image">
           </div>
           <h2 class="history-text">HISTORY</h2>
       </div>

       <!-- Navigation -->
       <nav class="nav-menu">
           <a href="index.html" class="nav-link">Home</a>
           <a href="index.html#stories-section" class="nav-link">Stories</a>
           <a href="index2.html" class="nav-link">Gallery</a>
           <a href="index4.html" class="nav-link">About</a>
           <a href="index3.html" class="nav-link">Contact</a>
           <a href="bot.html" class="nav-link service active">Service</a>
       </nav>

       <!-- Social Media Icons -->
       <div class="social-icons">
           <a href="#" title="Facebook">📘</a>
           <a href="#" title="YouTube">📺</a>
           <a href="#" title="Instagram">📷</a>
       </div>
   </div>

   <div class="chatbot-container">
       <!-- Header -->
       <div class="chatbot-header">
           <div class="chatbot-logo">
               <img src="https://github.com/Afrizal236/kesehatan/blob/main/pngtree-chatbot-icon-chat-bot-robot-png-image_4841963.png?raw=true" alt="ChatBot">
           </div>
           <h1 class="chatbot-title">ChatBot Sejarah Surabaya</h1>
           <p class="chatbot-subtitle">Tanya aku tentang sejarah Kota Pahlawan</p>
       </div>

       <!-- Chat Messages -->
       <div class="chat-messages" id="chatMessages">
           <div class="message bot">
               Halo! Saya adalah ChatBot Sejarah Surabaya. Saya siap membantu Anda mengetahui lebih banyak tentang sejarah Kota Pahlawan. Silakan pilih pertanyaan di bawah atau ketik pertanyaan Anda sendiri!
           </div>
           <div class="typing-indicator" id="typingIndicator">
               <div class="typing-dots">
                   <div class="typing-dot"></div>
                   <div class="typing-dot"></div>
                   <div class="typing-dot"></div>
               </div>
           </div>
       </div>

       <!-- Quick Questions -->
       <div class="quick-questions" id="quickQuestions">
           <h3>Pertanyaan Populer:</h3>
           <div class="question-buttons">
               <button class="question-btn" onclick="askQuestion('Perjuangan Arek-Arek Suroboyo')">Perjuangan Arek-Arek Suroboyo</button>
               <button class="question-btn" onclick="askQuestion('Pertempuran 10 November')">Pertempuran 10 November</button>
               <button class="question-btn" onclick="askQuestion('Patung Proklamator')">Patung Proklamator</button>
               <button class="question-btn" onclick="askQuestion('Museum Sepuluh Nopember')">Museum Sepuluh Nopember</button>
               <button class="question-btn" onclick="askQuestion('Bung Tomo')">Bung Tomo</button>
               <button class="question-btn" onclick="askQuestion('Logo Surabaya Hiu Buaya')">Logo Surabaya Hiu & Buaya</button>
               <button class="question-btn" onclick="askQuestion('Semboyan Merdeka atau Mati')">Semboyan Merdeka atau Mati</button>
           </div>
       </div>

       <!-- Chat Input -->
       <div class="chat-input" id="chatInput">
           <input type="text" id="messageInput" placeholder="Ketik pertanyaan Anda tentang sejarah Surabaya..." onkeypress="handleKeyPress(event)">
           <button class="send-btn" id="sendBtn" onclick="sendMessage()">Kirim</button>
       </div>
   </div>

   <script>
       let chatEnded = false;

       // Sidebar functionality
       function toggleSidebar() {
           const sidebar = document.getElementById('sidebar');
           const overlay = document.getElementById('overlay');
           const hamburger = document.querySelector('.hamburger-menu');
           
           sidebar.classList.toggle('open');
           overlay.classList.toggle('show');
           hamburger.classList.toggle('active');
       }

       function closeSidebar() {
           const sidebar = document.getElementById('sidebar');
           const overlay = document.getElementById('overlay');
           const hamburger = document.querySelector('.hamburger-menu');
           
           sidebar.classList.remove('open');
           overlay.classList.remove('show');
           hamburger.classList.remove('active');
       }

       // Close sidebar when clicking on nav links
       document.querySelectorAll('.nav-link').forEach(link => {
           link.addEventListener('click', function() {
               closeSidebar();
           });
       });

       const responses = {
           'perjuangan arek-arek suroboyo': 'Perjuangan Arek-Arek Suroboyo merupakan diorama patung yang dipamerkan di Museum 10 November, Surabaya. Menggambarkan suasana heroik saat para pejuang muda Surabaya bersatu mempertahankan kemerdekaan Indonesia dari penjajahan pasca-Proklamasi. Terlihat keragaman latar belakang para pejuang yang bersatu dalam semangat nasionalisme.',
           
           'pertempuran 10 november': 'Pertempuran 10 November 1945 adalah peristiwa bersejarah di mana arek-arek Surabaya melawan tentara Sekutu (Inggris) yang ingin mengembalikan kekuasaan Belanda. Seorang pejuang tampak mengangkat tangan, dikelilingi rekan-rekannya yang bertempur dan gugur di medan perang. Ekspresi mereka menggambarkan semangat juang dan pengorbanan arek-arek Surabaya saat melawan penjajah. Patung ini menjadi simbol kepahlawanan dan keberanian yang menginspirasi perjuangan bangsa Indonesia.',
           
           'patung proklamator': 'Patung Proklamator menampilkan dua sosok proklamator, Soekarno dan Hatta, yang berdiri tegak di depan Tugu Pahlawan Surabaya. Patung ini menggambarkan momen penting dalam sejarah kemerdekaan Indonesia. Sebagai simbol perjuangan dan persatuan, patung ini menjadi pengingat jasa mereka bagi bangsa dalam memproklamasikan kemerdekaan Indonesia pada 17 Agustus 1945.',
           
           'museum sepuluh nopember': 'Museum Sepuluh Nopember adalah simbol perjuangan dan tujuan wisata sejarah yang penting di Surabaya. Para turis mancanegara terlihat mengikuti tur edukatif di dalam museum ini. Mereka menyimak berbagai diorama dan dokumentasi sejarah perjuangan rakyat Surabaya pada masa kemerdekaan. Museum ini menjadi destinasi penting untuk mengenal lebih dekat semangat heroik dalam Pertempuran 10 November 1945.',
           
           'bung tomo': 'Bung Tomo (Sutomo) adalah pahlawan nasional dan tokoh sentral dalam Pertempuran 10 November 1945 di Surabaya. Lahir pada 3 Oktober 1920, beliau adalah seorang orator ulung yang mampu membangkitkan semangat juang rakyat Surabaya melalui pidato-pidatonya di Radio Pemberontakan. Pidato terkenalnya "Allahu Akbar! Allahu Akbar! Allahu Akbar! Merdeka!" yang disiarkan melalui radio berhasil membakar semangat arek-arek Suroboyo untuk melawan tentara Sekutu. Bung Tomo berperan sebagai juru bicara dan pemimpin spiritual yang menyatukan seluruh elemen masyarakat Surabaya dalam perlawanan heroik. Berkat kepemimpinannya, Surabaya menjadi simbol perlawanan dan meraih julukan "Kota Pahlawan". Beliau wafat pada 7 Oktober 1981 dan dimakamkan di Taman Makam Pahlawan Kusuma Negara, Jakarta.',
           
           'sutomo': 'Sutomo atau yang lebih dikenal dengan sebutan Bung Tomo adalah pahlawan nasional Indonesia yang berperan penting dalam Pertempuran 10 November 1945. Beliau adalah seorang pemimpin dan orator handal yang melalui pidato-pidatonya di radio berhasil membangkitkan semangat perlawanan rakyat Surabaya terhadap tentara Sekutu. Pidatonya yang legendaris menjadi pemicu semangat juang arek-arek Suroboyo dalam mempertahankan kemerdekaan.',
           
           'makam pahlawan tak dikenal': 'Makam Pahlawan Tak Dikenal merupakan bentuk penghormatan tanpa nama kepada para pejuang yang gugur dalam mempertahankan kemerdekaan. Tempat ini menjadi saksi bisu perjuangan para pahlawan yang tidak dikenal namanya namun jasanya tetap dikenang. Museum ini juga menjadi destinasi penting untuk mengenal lebih dekat semangat heroik dalam Pertempuran 10 November 1945.',
           
           'semboyan merdeka atau mati': 'Semboyan "Merdeka atau Mati!" atau "Merdeka ataoe Mati!" yang terpampang di pilar menjadi simbol semangat juang para pahlawan dalam merebut kemerdekaan Indonesia. Semboyan ini mencerminkan tekad kuat bahwa kemerdekaan adalah harga mati, dan mereka rela berkorban nyawa demi membebaskan bangsa dari penjajahan. Hingga kini, kalimat tersebut tetap menjadi pengingat akan keberanian dan pengorbanan generasi pejuang.',
           
           'logo surabaya hiu buaya': 'Logo Surabaya berbentuk hiu dan buaya berasal dari legenda asal-usul nama "Surabaya" yang konon berasal dari kata "Sura" (hiu) dan "Baya" (buaya). Menurut cerita rakyat, dahulu kala terjadi pertempuran hebat antara seekor hiu dan buaya di perairan Surabaya. Pertarungan ini melambangkan kekuatan dan keberanian, yang kemudian menjadi filosofi masyarakat Surabaya. Hiu melambangkan kekuatan laut dan keberanian, sedangkan buaya melambangkan kekuatan darat dan ketangguhan. Kombinasi keduanya mencerminkan semangat pantang menyerah dan keberanian warga Surabaya yang kemudian terbukti dalam berbagai perjuangan, termasuk Pertempuran 10 November 1945.',
           
           'sura baya': 'Nama "Surabaya" dipercaya berasal dari kata "Sura" (hiu) dan "Baya" (buaya). Ini adalah legenda yang menceritakan pertempuran antara hiu dan buaya di perairan Surabaya. Pertarungan ini melambangkan kekuatan dan keberanian yang menjadi karakter khas masyarakat Surabaya. Logo kota pun menggunakan simbol ini sebagai representasi semangat perjuangan dan ketangguhan warga Surabaya.',
           
           'hiu buaya': 'Hiu dan buaya dalam logo Surabaya melambangkan legenda asal-usul nama kota. "Sura" (hiu) dan "Baya" (buaya) bertarung dalam cerita rakyat, yang kemudian menjadi filosofi kekuatan dan keberanian. Hiu mewakili kekuatan laut dan keberanian, buaya mewakili kekuatan darat dan ketangguhan. Kombinasi ini mencerminkan karakter masyarakat Surabaya yang pantang menyerah.',
           
           'radio pemberontakan': 'Radio Pemberontakan adalah stasiun radio yang digunakan Bung Tomo untuk menyiarkan pidato-pidatonya yang membangkitkan semangat juang rakyat Surabaya. Melalui radio inilah pidato legendaris Bung Tomo dengan seruan "Allahu Akbar! Merdeka!" disiarkan dan berhasil menyatukan seluruh elemen masyarakat Surabaya dalam perlawanan terhadap tentara Sekutu.',
           
           'surabaya': 'Surabaya adalah ibu kota Provinsi Jawa Timur yang dikenal sebagai Kota Pahlawan. Nama "Surabaya" berasal dari legenda pertempuran antara "Sura" (hiu) dan "Baya" (buaya). Kota ini memiliki sejarah panjang dalam perjuangan kemerdekaan Indonesia, terutama dalam Pertempuran 10 November 1945 yang dipimpin oleh Bung Tomo. Berbagai monumen dan museum bersejarah dapat ditemukan di kota ini.',
           
           'tugu pahlawan': 'Tugu Pahlawan adalah monumen bersejarah yang didirikan untuk mengenang para pejuang yang gugur dalam Pertempuran 10 November 1945. Tugu ini menjadi simbol kepahlawanan dan semangat juang rakyat Surabaya dalam mempertahankan kemerdekaan Indonesia.',

           'oke': 'Terima kasih telah menggunakan ChatBot Sejarah Surabaya! Semoga informasi yang saya berikan bermanfaat untuk menambah pengetahuan Anda tentang sejarah Kota Pahlawan. Sampai jumpa lagi! 🙏',
           
           'default': 'Maaf, saya belum memiliki informasi tentang topik tersebut. Silakan tanyakan tentang Perjuangan Arek-Arek Suroboyo, Pertempuran 10 November, Patung Proklamator, Museum Sepuluh Nopember, Bung Tomo, Logo Surabaya Hiu & Buaya, atau Semboyan Merdeka atau Mati. Anda juga bisa bertanya tentang sejarah Surabaya secara umum!'
       };

       function addMessage(message, isUser = false) {
           const chatMessages = document.getElementById('chatMessages');
           const messageDiv = document.createElement('div');
           messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
           messageDiv.textContent = message;
           chatMessages.appendChild(messageDiv);
           chatMessages.scrollTop = chatMessages.scrollHeight;
       }

       function showTypingIndicator() {
           const indicator = document.getElementById('typingIndicator');
           indicator.style.display = 'flex';
           const chatMessages = document.getElementById('chatMessages');
           chatMessages.scrollTop = chatMessages.scrollHeight;
       }

       function hideTypingIndicator() {
           const indicator = document.getElementById('typingIndicator');
           indicator.style.display = 'none';
       }

       function endChat() {
           chatEnded = true;
           
           // Disable input dan buttons
           document.getElementById('chatInput').classList.add('disabled');
           document.getElementById('quickQuestions').classList.add('disabled');
           
           // Tambahkan tombol restart
           const chatInput = document.getElementById('chatInput');
           const restartBtn = document.createElement('button');
           restartBtn.className = 'restart-btn';
           restartBtn.textContent = 'Mulai Chat Baru';
           restartBtn.onclick = restartChat;
           chatInput.appendChild(restartBtn);
       }

       function restartChat() {
           chatEnded = false;
           
           // Clear chat messages
           const chatMessages = document.getElementById('chatMessages');
           chatMessages.innerHTML = `
               <div class="message bot">
                   Halo! Saya adalah ChatBot Sejarah Surabaya. Saya siap membantu Anda mengetahui lebih banyak tentang sejarah Kota Pahlawan. Silakan pilih pertanyaan di bawah atau ketik pertanyaan Anda sendiri!
               </div>
               <div class="typing-indicator" id="typingIndicator">
                   <div class="typing-dots">
                       <div class="typing-dot"></div>
                       <div class="typing-dot"></div>
                       <div class="typing-dot"></div>
                   </div>
               </div>
           `;
           
           // Enable input dan buttons
           document.getElementById('chatInput').classList.remove('disabled');
           document.getElementById('quickQuestions').classList.remove('disabled');
           
           // Remove restart button
           const restartBtn = document.querySelector('.restart-btn');
           if (restartBtn) {
               restartBtn.remove();
           }
           
           // Clear input
           document.getElementById('messageInput').value = '';
       }

       function getBotResponse(userMessage) {
           if (chatEnded) return null;
           
           const lowerMessage = userMessage.toLowerCase().trim();
           
           // Check for "oke" specifically
           if (lowerMessage === 'oke') {
               return responses.oke;
           }
           
           // Check if message matches any topic
           for (const [key, value] of Object.entries(responses)) {
               if (key !== 'default' && key !== 'oke' && lowerMessage.includes(key)) {
                   return value;
               }
           }
           
           return responses.default;
       }

       function sendMessage() {
           if (chatEnded) return;
           
           const input = document.getElementById('messageInput');
           const message = input.value.trim();
           
           if (message === '') return;
           
           addMessage(message, true);
           input.value = '';
           
           showTypingIndicator();
           
           setTimeout(() => {
               hideTypingIndicator();
               const botResponse = getBotResponse(message);
               
               if (botResponse) {
                   addMessage(botResponse);
                   
                   // Check if user said "oke"
                   if (message.toLowerCase().trim() === 'oke') {
                       setTimeout(() => {
                           endChat();
                       }, 1000);
                   } else {
                       // Jika memberikan jawaban yang valid (bukan default), tambahkan follow-up
                       const lowerMessage = message.toLowerCase().trim();
                       let foundValidResponse = false;
                       
                       for (const [key, value] of Object.entries(responses)) {
                           if (key !== 'default' && key !== 'oke' && lowerMessage.includes(key)) {
                               foundValidResponse = true;
                               break;
                           }
                       }
                       
                       if (foundValidResponse) {
                           setTimeout(() => {
                               addMessage('Apakah ada hal lain yang ingin Anda ketahui tentang sejarah Surabaya? Jika tidak, silakan ketik "oke" untuk mengakhiri percakapan.');
                           }, 1500);
                       }
                   }
               }
           }, 1000 + Math.random() * 1000);
       }

       function askQuestion(question) {
           if (chatEnded) return;
           
           addMessage(question, true);
           
           showTypingIndicator();
           
           setTimeout(() => {
               hideTypingIndicator();
               const botResponse = getBotResponse(question);
               
               if (botResponse) {
                   addMessage(botResponse);
                   
                   // Tambahkan follow-up setelah memberikan jawaban
                   setTimeout(() => {
                       addMessage('Apakah ada hal lain yang ingin Anda ketahui tentang sejarah Surabaya? Jika tidak, silakan ketik "oke" untuk mengakhiri percakapan.');
                   }, 1500);
               }
           }, 1000 + Math.random() * 1000);
       }

       function handleKeyPress(event) {
           if (event.key === 'Enter') {
               sendMessage();
           }
       }

       // Auto-scroll to bottom when page loads
       window.addEventListener('load', function() {
           const chatMessages = document.getElementById('chatMessages');
           chatMessages.scrollTop = chatMessages.scrollHeight;
       });

       // Close sidebar when clicking outside
       document.addEventListener('click', function(event) {
           const sidebar = document.getElementById('sidebar');
           const hamburger = document.querySelector('.hamburger-menu');
           
           if (!sidebar.contains(event.target) && !hamburger.contains(event.target)) {
               if (sidebar.classList.contains('open')) {
                   closeSidebar();
               }
           }
       });
   </script>
</body>
</html>